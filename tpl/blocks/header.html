<!-- header -->
<header id="header" class="app-header navbar" role="menu">
    <!-- navbar header -->
    <div class="visible-xs navbar-header {{app.settings.navbarHeaderColor}}">
        <button class="pull-right visible-xs dk" ui-toggle-class="show" data-target=".navbar-collapse">
            <i class="glyphicon glyphicon-cog"></i>
        </button>
        <button class="pull-right visible-xs" ui-toggle-class="off-screen" data-target=".app-aside" ui-scroll-to="app">
            <i class="glyphicon glyphicon-align-justify"></i>
        </button>
        <a href="#/" class="navbar-brand text-lt">
            <span class="hidden-folded m-l-xs">{{app.name}}</span>
        </a>
    </div>
    <!-- / navbar header -->

    <!-- navbar collapse -->
    <div class="collapse pos-rlt navbar-collapse box-shadow {{app.settings.navbarCollapseColor}}" ng-init="initSwitchedBranch()">

        <!-- search form -->
        <form class="navbar-form navbar-form-sm navbar-left shift" ui-shift="prependTo" data-target=".navbar-collapse" role="search" ng-controller="PatientSearchController">
            <div class="form-group">
                <div class="input-group">
                    <input id="patient-search" type="text" ng-model="patientselected" class="form-control input-sm bg-light no-border rounded padder header_search_input" placeholder="Search...." autocomplete="off">
                    <div class="patient-search-result" ng-if="patientselected != ''" >
                        <ul class="search-patientcont-header" id='patientcont-header'>
                            <li ng-if="seacrhing_global == true"><div class="text-center"><i class="fa fa-spin fa-spinner"></i></div></li>
                            <li ng-if="seacrhing_global == false && patient_lists == false"><div class="text-center">No Record Found !!!</div></li>
                            <li ng-repeat="(key, patient) in patient_lists| filter:patientselected" class="{{key == 0 ? 'selected' : ''}}">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-2 col-md-2">
                                        <img width="36" height="36" class="patient-image" src="img/man-icon.png" ng-attr-lazy-img="{{ patient.Patient.patient_img_url ? patient.Patient.patient_img_url : ($even ? 'img/man-icon.png' : 'img/man-icon2.png') }}" />
                                    </div>
                                    <div ng-if="!patient.PatientMerged" class="col-xs-12 col-sm-5 col-md-6">
                                        <div class="row ng-binding">
                                            <a ng-if="patient.same_branch == true && patient.same_org == true" tooltip="{{patient.Patient.fullcurrentaddress|| patient.Patient.fullpermanentaddress}}" ng-bind-html="patient.Patient.fullname | highlight:patientselected" href="javascript:void(0)" ng-click="goToPatient(patient.Patient.patient_guid)" class="ng-binding">
                                            </a>
                                            <a ng-if="patient.same_branch == false && patient.same_org == true" tooltip="{{patient.Patient.fullcurrentaddress|| patient.Patient.fullpermanentaddress}}" ng-bind-html="patient.Patient.fullname | highlight:patientselected" href="javascript:void(0)" ng-click="importViewPatient(patient.Patient.patient_global_guid, key)" class="ng-binding">
                                            </a>
                                            <a ng-if="patient.same_branch == false && patient.same_org == false" ng-bind-html="patient.Patient.fullname | highlight:patientselected" href="javascript:void(0)" class="ng-binding">
                                            </a>
                                            <b ng-if="patient.Patient.patient_age_ym">({{patient.Patient.patient_age_ym}}) </b>
                                            <br>
                                            <span class="pull-left" ng-bind-html="patient.Patient.patient_global_int_code | highlight:patientselected"></span> &nbsp; &nbsp;
                                            <span ng-bind-html="patient.Patient.patient_mobile | highlight:patientselected"> </span>
                                            <br>
                                            <p class="pull-left" ng-if="patient.same_branch == false">
                                                <span>
                                                    Organization: <b>{{patient.Patient.org_name}}</b>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                    <div ng-if="patient.PatientMerged" class="col-xs-12 col-sm-5 col-md-6">
                                        <div class="row ng-binding">
                                            <a ng-if="patient.same_branch == true && patient.same_org == true" ng-bind-html="patient.PatientMerged.fullname | highlight:patientselected" href="javascript:void(0)" ng-click="goToPatient(patient.Patient.patient_guid)" class="ng-binding">
                                            </a>
                                            <a ng-if="patient.same_branch == false && patient.same_org == true" ng-bind-html="patient.PatientMerged.fullname | highlight:patientselected" href="javascript:void(0)" ng-click="importViewPatient(patient.Patient.patient_global_guid, key)" class="ng-binding">
                                            </a>
                                            <b ng-if="patient.Patient.patient_age_ym">({{patient.Patient.patient_age_ym}}) </b>
                                            <br>
                                            <span class="pull-left" ng-bind-html="patient.PatientMerged.patient_global_int_code | highlight:patientselected"></span> &nbsp; &nbsp;
                                            <span ng-bind-html="patient.PatientMerged.patient_mobile | highlight:patientselected"> </span>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-5 col-md-4 pull-right right" ng-if="patient.same_branch == true && patient.same_org == true && !patient.PatientMerged">
                                        <button class="btn m-b-xs w-xs btn-info" ng-show="patient.PatientActiveEncounter == null" ng-click="goToAppointment(patient.Patient.patient_guid)">
                                            BOOK
                                        </button>
                                        <span class="label label-primary admission_details" ng-show="patient.PatientActiveEncounter != null && patient.PatientActiveEncounter.searchEncData.isAdmission != false">
                                            {{patient.PatientActiveEncounter.searchEncData.isAdmission.floor_name}} > {{patient.PatientActiveEncounter.searchEncData.isAdmission.room_name}} > {{patient.PatientActiveEncounter.searchEncData.isAdmission.room_type_name}}
                                        </span>
                                        <span class="label label-primary admission_details" ng-show="patient.PatientActiveEncounter != null && patient.PatientActiveEncounter.searchEncData.isAppointment == true">
                                            Booked
                                        </span>
                                    </div>
                                    <div class="col-xs-12 col-sm-5 col-md-4 pull-right right" ng-if="patient.same_branch == false && patient.same_org == true && !patient.PatientMerged">
                                        <button class="btn m-b-xs w-xs btn-info" id="import_book_{{key}}"  ng-click="importBookPatient(patient.Patient, key)">
                                            BOOK
                                        </button>
                                    </div>
                                    <div class="col-xs-12 col-sm-5 col-md-4 pull-right right" ng-if="patient.same_branch == false && patient.same_org == false && !patient.PatientMerged">
                                        <p class="">
                                            <button class="btn btn-primary" id="import_{{key}}" ng-click="importPatient(patient.Patient, key)">
                                                IMPORT DATA
                                            </button>
                                        </p>
                                    </div>
                                    <div class="col-xs-12 col-sm-5 col-md-4 pull-right right" ng-if="patient.PatientMerged">
                                        <span class="label label-danger admission_details">
                                            Merged
                                        </span>
                                        {{patient.Patient.patient_global_int_code}}
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-12 pull-right right">
                                        <button class="btn m-b-xs w-xs btn-success fullwidth" ng-click="goToRegistration()">Register</button>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-sm bg-light rounded"><i class="fa fa-search patient_search_loader"></i></button>
                    </span>
                </div>
            </div>
        </form>
        <!-- / search form -->

        <div class="navbar-header">
            <button class="pull-right visible-xs dk" ui-toggle-class="show" data-target=".navbar-collapse">
                <i class="glyphicon glyphicon-cog"></i>
            </button>
            <button class="pull-right visible-xs" ui-toggle-class="off-screen" data-target=".app-aside" ui-scroll-to="app">
                <i class="glyphicon glyphicon-align-justify"></i>
            </button>
            <a href="#/" class="navbar-brand text-lt">
                <span class="hidden-folded m-l-xs">{{app.name}}</span>
            </a>
        </div>

        <!-- link and dropdown -->
        <ul class="nav navbar-nav">

            <li class="{{(currentPage == 'myworks' ? 'topactive' : '')}}" ui-sref-active="active">
                <a ui-sref="myworks.dashboard" check-access> My Works</a>
            </li>

            <li class="{{(currentPage == 'IP' ? 'topactive' : '')}}" ui-sref-active="active">
                <a ui-sref="patient.inPatients" check-access>In-Patient</a>
            </li>

            <li class="{{(currentPage == 'OP' ? 'topactive' : '')}}" ui-sref-active="active">
                <a ui-sref="patient.outPatients" check-access>Out-Patients</a>
            </li>

            <li class="{{(currentPage == 'pharmacy' ? 'topactive' : '')}}" ui-sref-active="active">
                <a ui-sref="pharmacy.saleCreate" check-access> Pharmacy</a>
            </li>

            <li class="{{(currentPage == 'configuration' ? 'topactive' : '')}}" ui-sref-active="active">
                <a ui-sref="configuration.organization" check-access> Configuration</a>
            </li>
        </ul>
        <div class="navbar-header-branchswitch" ng-if="switched_branches_list != ''">
            <select class="form-control" ng-model="branch_switch.branch_id" ng-options="branch_id as branch_name for (branch_id,branch_name) in switched_branches_list | orderBy: branch_name" ng-change="switchBranch()">
            </select>
        </div>

        <!-- / link and dropdown -->

        <!-- nabar right -->
        <ul class="nav navbar-nav navbar-right">
            <li class="hidden-xs"> <a class="sb-toggle-right" href="#"> <i class="fa fa-bars"></i> </a> </li>
        </ul>
        <!-- / navbar right -->
    </div>
    <!-- / navbar collapse -->
</header>
<div class="alert alert-warning network-mgs" type="info" ng-if="!online">
    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  <span> Not connected.</span> Check Your Internet connection
</div> 
<!-- / header -->
<script>
    $(function () {
        if ($.isFunction($.slidebars)) {
            slidebar();
        } else {
            $.getScript("js/slidebars.js", function (data, textStatus, jqxhr) {
                slidebar();
            });
        }
    });

    function slidebar() {
        $.slidebars({
            scrollLock: true
        });
    }
</script>


<!--<script type="text/ng-template" id="searchbox">
   <a tabindex="-1" ui-sref="patient.encounter({id: 1})">
      <i ng-class="'icon-'+match.model.type"></i>match.model
      <span  ng-bind-html-unsafe="match.model.title | typeaheadHighlight:query"></span>
   </a>
</script>-->